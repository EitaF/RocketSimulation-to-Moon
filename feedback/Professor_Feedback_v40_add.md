了解しました。LEOからTLIへの移行に向けて、Professor v39で達成された実装と、v40のタスクリストを精査したうえで、現段階で最も合理的かつ効率的なステップを再構築します。

最適化されたアクションプランとその理由について、追ってお知らせします。


# Recommended Next Steps for LEO-to-TLI Phase

Based on the v39 implementation results and the v40 feedback tasks, we recommend the following adjusted action plan. Each step is prioritized to accelerate progress, improve system robustness, and reduce mission risk:

1. **Execute a Full 6000 s Simulation with TLI Burn (Task A1)** – **Rationale:** This end-to-end test will validate the newly implemented TLI burn sequence under real conditions, using the \~49.1% Stage-3 fuel remaining after orbit insertion to attempt Trans-Lunar Injection. The TLI guidance code added in v39 is still unproven in an integrated run, so conducting the 6000 s simulation now will catch any bugs or tuning issues early. Success is defined by achieving a positive C3 energy (escape trajectory) and an apogee \~400,000 km with >5% propellant left in Stage 3, confirming the vehicle can actually reach a lunar transfer trajectory with fuel to spare. By immediately analyzing the mission log from this run, the team can verify burn timing, ΔV delivered, and fuel usage, and then address any anomalies before moving on.

2. **Introduce Logging Level Controls Before Batch Runs (Task A4)** – **Rationale:** Implement a `--debug/--quiet` logging switch and convert frequent printouts to debug-level logs. This refactor will dramatically reduce log verbosity during long or repeated simulations, preventing slowdowns and log file bloat. By doing this **prior to** running dozens of cases, the team ensures that subsequent Monte Carlo and sweep simulations run efficiently and are easier to analyze (the default log should stay ≤5 MB in size). This step accelerates progress by eliminating the I/O overhead and clutter of excessive debug prints, while still allowing full detail when needed for troubleshooting.

3. **Run a 100-Case Monte Carlo Reliability Campaign (Task A2)** – **Rationale:** With the TLI sequence verified and logging optimized, stress-test the mission under varied conditions (±5% atmosphere density, ±1% engine Isp, sensor noise) by executing the Monte Carlo campaign. This will gauge the robustness of the LEO-to-TLI transition: the goal is at least 90% of runs reaching stable LEO and successfully initiating TLI with a positive ΔV margin. Analyzing these 100 runs will reveal any edge-case failures or guidance weaknesses under uncertainty, allowing the team to fix them now (e.g. adjust cutoff thresholds or guidance parameters) rather than during an actual mission. Achieving high reliability (≥90% success) and a healthy ΔV safety margin (on the order of +100 m/s on average) across many trials proves the system is robust and reduces risk before finalizing mission parameters.

4. **Validate Launch Window and Phase Angle Calculations (Task A3)** – **Rationale:** In parallel with the above simulations, add rigorous unit tests for the `launch_window_calculator` module to cover extreme phase angles and edge cases. Ensuring this orbital mechanics code is accurate (within <1° phase error) is vital for timing the TLI burn correctly so that the spacecraft actually arrives at the Moon’s trajectory. Verifying the launch window logic now improves mission reliability and safety – it prevents a scenario where the vehicle executes a perfect burn but at the wrong time, missing the Moon. By confirming all test cases pass (mean phase-angle error <1°), we reduce the risk of timing-related mission failure and lay groundwork for an eventual fully automated translunar mission plan.

5. **Re-run the Expanded Parameter Sweep for Optimal Profiles (Task A5)** – **Rationale:** After confirming the system’s stability and fixing any issues from steps 1–4, perform a full parameter sweep with the updated ranges to identify the top-performing launch configurations. This sweep (spanning the expanded pitch rates, launch angles, and timing offsets introduced in v39) will pinpoint the **best** trajectories that consistently leave a high fuel reserve in Stage 3. Focusing on cases with ≥35% propellant remaining at orbit insertion (far above the 30% minimum) provides extra TLI margin, directly improving mission success odds. The result will be a ranked list of candidate launch profiles (e.g. top 5) that maximize Stage-3 fuel economy. Optimizing the flight parameters in this way accelerates progress toward a reliable TLI by ensuring the **nominal mission plan** starts from the most efficient, robust conditions (in fact, mission success criteria call for a median ≥35% fuel remaining, which this step addresses). These data-driven optimizations will inform the final TLI launch configuration and any necessary tweaks to guidance for maximal performance.

Each of the above actions builds on the v39 fixes and aligns with the Professor’s v40 objectives, but the sequence is adjusted to minimize risk and maximize efficiency. By first proving the TLI burn in simulation and tightening logging, then stress-testing for reliability, and finally fine-tuning both the launch window and vehicle parameters, the team can **confidently proceed from LEO to TLI** with a robust, well-validated system. This revised order ensures that critical functionality is verified early and that subsequent analyses (Monte Carlo and sweep) yield meaningful, trustworthy results, ultimately speeding up the path to a successful translunar injection.
